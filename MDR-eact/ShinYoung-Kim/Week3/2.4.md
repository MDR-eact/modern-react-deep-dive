# 렌더링은 어떻게 일어나는가?

렌더링 = 렌더링에 필요한 DOM 트리를 만드는 과정

## 1. 리액트의 렌더링이란?

리액트의 렌더링과 브라우저 렌더링이 다른 의미이다.
브라우저 렌더링은 웹 페이지를 화면에 표시하기 위한 전체 과정을 의미하고, 리액트 렌더링은 리액트를 사용하여 UI를 구축하고 업데이트하는 프로세스를 의미한다.

## 2. 리액트의 렌더링이 일어나는 이유

1. 최초 렌더링
2. 리렌더링
      - 클래스 컴포넌트의 setState 실행 시
      - 클래스 컴포넌트의 forceUpdate 실행 시
      - 함수 컴포넌트의 setter가 실행 시
      - 함수 컴포넌트의 dispatch 실행 시
      - 컴포넌트의 key props가 변경 시
      - props 변경 시
      - 부모 컴포넌트 변경 시

> 리액트에서 key가 필요한 이유: 리액트에서 리렌더링이 일어났을 때 current 트리와 workInProgress 트리 사이 변경을 감지하기 위해 key를 사용한다. = key의 변화가 일어나면 리렌더링이 일어난다.

## 3. 리액트의 렌더링 프로세스

1. 트리의 루트부터 탐색하여 업데이트가 필요한 컴포넌트 찾기
2. 렌더 함수 실행 및 렌더링 결과 수집
      - 클래스형 컴포넌트의 경우, render 함수 실행
      - 함수형 컴포넌트의 경우, 컴포넌트 함수 자체를 호출
3. 가상 DOM과 비교하여 변경사항 수집 (재조정)
4. 변경사항 DOM에 반영

## 4. 렌더와 커밋

- 렌더 단계: 렌더링 프로세스에서 컴포넌트를 실행하여 이 결과와 이전 가상 DOM을 비교(type, props, key)하는 과정을 거쳐 변경이 필요한 컴포넌트를 체크하는 단계
- 커밋 단계: 렌더 단계의 변경 사항을 실제 DOM에 적용해 사용자에게 보여주는 과정

**리액트의 렌더링이 일어난다고 해서 무조건 DOM 업데이튿가 일어나는 것은 아니다.**

## 5. 일반적인 렌더링 시나리오 살펴보기

리액트에서는 상위 컴포넌트에서 리렌더링이 일어나면 하위 컴포넌트에서도 리렌더링이 일어난다.
-> useMemo 훅을 사용하여 리렌더링 방지 가능
