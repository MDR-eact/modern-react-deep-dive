# 이벤트 루프와 비동신 통신의 이해

> **동기 방식과 비동기 방식**
>
> 동기 방식은 직렬 방식으로 작업을 처리, 비동기 방식은 병렬 방식으로 작업을 처리하는 것을 말한다.
> JS는 싱글 스레드에서 동기 방식으로 작동하나, 비동기 작업을 진행할 수 있다.

## 1. 싱글 스레드 자바스크립트

: 자바스크립트를 설계할 당시에는 JS가 웹에서 다양한 역할을 하게 될 것을 짐작하지 못했고, 멀티 스레드를 사용하는데 동시에 같은 자원에 접근하여 이슈가 발생한다면 브라우저 DOM 표시에 큰 영향을 줄 수 있어 JS는 싱글 스레드로 만들어지게 되었다.

- `Run to completion` : 하나의 코드가 실행하는 데에 오래 걸리면 이후 코드가 실행되지 않는 특징

## 2. 이벤트 루프란?

- `이벤트 루프` : JS에서 비동기 작업을 지원하기 위해 만들어진 장치
     - 호출 스택이 비어있는지 확인, 코드 실행, 태스크 큐에 대기중인 함수가 있는지 확인 등의 업무 수행
- `호출 스택` : JS에서 수행햐애 할 코드나 함수를 순차적으로 담아두는 스택
     - 특정 함수나 코드가 있는 줄에 도달하면 호출 스택에 넣고, 더 이상 해당 함수/코드에서 실행할 것이 없을 때 호출 스택에서 제거한다.
- `태스크 큐` : 실행해야 할 태스크의 집합
     - 호출스택이 모두 비고 비동기 작업이 실행가능한 타이밍이 되면, 비동기적인 작업은 태스크 큐가 할당되는 별도의 스레드에서 실행된다.

❓태스크 큐가 set 형태인 것이 선택된 큐 중에 실행 가능한 가장 오래된 태스크를 가져오는 것에 어떤 도움?
-> set이 아닌 우선순위큐인듯

## 3. 태스크 큐와 마이크로 태스크 큐

- 태스크큐 : setTimeout, setInterval, setImmediate
- 마이크로 태스크 큐 : process.nextTick, Promises, queueMicroTask, MutationObserver

### 순서

마이크로 태스크 큐를 실행할 때마다 렌더링이 필요하다면 렌더링을 진행하고 태스크 큐가 실행된다.

: 마이크로 태스크 큐 -> (렌더링) -> 태스크 큐
