# 서버 사이드 렌더링

## 1. 싱글 페이지 어플리케이션의 세상

### 싱글 페이지 어플리케이션

`싱글 페이지 어플리케이션(SPA)`: 렌더링과 라우팅에 필요한 대부분의 기능을 서버가 아닌 브라우저의 자바스크립트에 의존하는 방식

- 서버에서 최소한의 데이터를 불러온 이후로는 자바스크립트와 브라우저 API를 기반으로 동작한다. (=추가적으로 html을 다운받지 않는다.)
- 기존 어플리케이션은 추가로 html을 다운받아 렌더링하는 동작으로 인해 화면 전환 시 좋지 않은 사용자 경험을 하게 될 수 있다는 단점이 있었다. SPA는 일부 영역만 재렌더링하여 이를 극복하였다.

### SPA 문제점

기술이 발전하면서 사용자의 기기나 인터넷 속도 등의 환경이 개선되었으나 실제 사용자가 겪는 로딩 시간은 크게 달라지지 않았다.

- 웹에서 점점 복잡한 처리를 요구하게 되었고
- 자바스크립트 파싱을 위해 CPU를 소비하는 시간이 늘어났기 때문이다.

## 2. 서버 사이드 렌더링이란?

### 서버 사이드 렌더링

`서버 사이드 렌더링(SSR)`: 서버에서 페이지를 렌더링해 제공하는 방식으로, 사용자 기기 성능에 영향받지 않고 안정적인 렌더링을 제공할 수 있다.

### 장점

1. 최초 페이지 진입이 비교적 빠르다.
2. 검색 엔진과 SNS 공유 등 메타데이터 제공이 쉽다.
3. 누적 레이아웃 이동이 적다

      : 사용자가 예상치 못한 순간에 페이지가 변경되는 현상

4. 사용자의 디바이스 성능에 비교적 자유롭다.
5. 보안에 안전하다.

### 단점

1. 서버를 고려한 소스코드를 작성해야 한다.

      : `window 객체`처럼 서버 단에서 사용할 수 없는 코드들이 존재한다. 이 코드들을 모두 클라이언트 단으로 변경하게 되면 서버 사이드의 장점을 잃을 수 있다.

2. 서버 구축의 난이도가 높다.
3. 서비스 지연 시 오히려 좋지 않은 사용자 경험 제공할 수도 있다.

### 멀티 페이지 애플리케이션에서 발생하는 라우팅 문제를 해결하기 위한 API

1. 페인트 홀딩

      : 같은 출처에서 라우팅이 일어날 경우 하얀 화면 대신 이전 페이지의 모습을 잠시 보여준다.

2. back forward cache(bfcache)

      : 브라우저 앞/뒤로 가기 실행 시 캐시된 페이지 보여준다.

3. Shared Element Transitions

      : 페이지 라우팅 일어나기 전/후에 동일한 요소가 있다면 해당 컨텍스트를 유지하여 부드럽게 전환된다.
